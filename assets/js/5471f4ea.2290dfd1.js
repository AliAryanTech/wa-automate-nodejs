"use strict";(self.webpackChunkdocs_v_3=self.webpackChunkdocs_v_3||[]).push([[9977],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>d});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),l=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),h=l(n),d=r,m=h["".concat(c,".").concat(d)]||h[d]||p[d]||a;return n?o.createElement(m,i(i({ref:t},u),{},{components:n})):o.createElement(m,i({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},6290:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var o=n(7462),r=(n(7294),n(3905));const a={sidebar_label:"The Client",description:"Guide showing how to edit the settings.",sidebar_position:1},i="The Client",s={unversionedId:"configuration/the-client",id:"configuration/the-client",title:"The Client",description:"Guide showing how to edit the settings.",source:"@site/docs/configuration/the-client.md",sourceDirName:"configuration",slug:"/configuration/the-client",permalink:"/docs/configuration/the-client",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/configuration/the-client.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_label:"The Client",description:"Guide showing how to edit the settings.",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"EASY API CLI options",permalink:"/docs/configuration/command-line-options"},next:{title:"Capturing QR Code",permalink:"/docs/configuration/capture-qr"}},c={},l=[{value:"How to create a client",id:"how-to-create-a-client",level:2},{value:"What happens when the session starts",id:"what-happens-when-the-session-starts",level:2}],u={toc:l};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"the-client"},"The Client"),(0,r.kt)("p",null,"Who/what is the client? The Client is the orchestrator of a WA Web session. You can have multiple clients in one node (or ts-node) process. But it's generally best practice to keep a single client on a single process."),(0,r.kt)("h2",{id:"how-to-create-a-client"},"How to create a client"),(0,r.kt)("p",null,"After you've installed the library in your project, you can then use ","[create]"," to ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"create"))," a new session. This simple example starts a bot that replies with ",(0,r.kt)("inlineCode",{parentName:"p"},"\ud83d\udc4b Hello!")," when it receives a ",(0,r.kt)("inlineCode",{parentName:"p"},"Hi")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const { create, Client } = require('@open-wa/wa-automate');\n\n// or\n// import { create, Client } from '@open-wa/wa-automate';\n\n\nfunction start(client) {\n  client.onMessage(async message => {\n    if (message.body === 'Hi') {\n      await client.sendText(message.from, '\ud83d\udc4b Hello!');\n    }\n  });\n}\n\ncreate().then(start);\n\n")),(0,r.kt)("p",null,"The method ",(0,r.kt)("inlineCode",{parentName:"p"},"create")," is what creates, authenticates/reloads a session. When you call create, make sure to keep an eye on the console output. In the console it will log the loading state of the client and the QR code (if there is no valid session data)."),(0,r.kt)("p",null,"You can call ",(0,r.kt)("inlineCode",{parentName:"p"},"create()")," on it's own, however there are a bunch of powerful configuration variables you can set to acheive a more custom set up."),(0,r.kt)("p",null,"[","[ConfigObject]","]"),(0,r.kt)("p",null,"Please note that you will be unable to scan the QR code if it is on a dark background."),(0,r.kt)("h2",{id:"what-happens-when-the-session-starts"},"What happens when the session starts"),(0,r.kt)("p",null,"In order to eliminate potential phishing attacks using this library, a message is sent to the host account from itself notifying the account user that the account is being managed/controlled using an automation software."),(0,r.kt)("p",null,"This host notification will result in a CORS error in the browser instance. You can ignore the error."),(0,r.kt)("p",null,"Learn more here: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/open-wa/wa-automate-nodejs/issues/709#issuecomment-673419088"},"https://github.com/open-wa/wa-automate-nodejs/issues/709#issuecomment-673419088")))}p.isMDXComponent=!0}}]);